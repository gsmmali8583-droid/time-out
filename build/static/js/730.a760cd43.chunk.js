"use strict";(self.webpackChunkecommerce_client=self.webpackChunkecommerce_client||[]).push([[730],{349(e,s,a){a.r(s),a.d(s,{default:()=>m});var r=a(2555),i=a(5043),n=a(3216),l=a(8254),t=a(5169),c=a(1137),d=a(2339),o=a(579);const m=()=>{const e=(0,n.Zp)(),{user:s}=(0,c.As)(),{items:a,getSubtotal:m,getTax:h,getTotal:p,clearCart:u}=(0,t._$)(),[x,j]=(0,i.useState)(!1),[v,y]=(0,i.useState)({firstName:(null===s||void 0===s?void 0:s.firstName)||"",lastName:(null===s||void 0===s?void 0:s.lastName)||"",email:(null===s||void 0===s?void 0:s.email)||"",phone:""}),[N,g]=(0,i.useState)({address:"",city:"",state:"",zipCode:"",country:"India"}),[f,C]=(0,i.useState)((0,r.A)((0,r.A)({},N),{},{sameAsShipping:!0})),[b,S]=(0,i.useState)("card"),[A,q]=(0,i.useState)({number:"",expiry:"",cvv:"",name:""}),k=e=>{y((0,r.A)((0,r.A)({},v),{},{[e.target.name]:e.target.value}))},P=e=>{const{name:s,value:a}=e.target;g((0,r.A)((0,r.A)({},N),{},{[s]:a})),f.sameAsShipping&&C((0,r.A)((0,r.A)({},f),{},{[s]:a}))},I=e=>{q((0,r.A)((0,r.A)({},A),{},{[e.target.name]:e.target.value}))};return 0===a.length?(e("/cart"),null):(0,o.jsx)("div",{className:"checkout-page",children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsxs)("div",{className:"checkout-header",children:[(0,o.jsx)("h1",{children:"Checkout"}),(0,o.jsx)("p",{children:"Complete your purchase"})]}),(0,o.jsxs)("div",{className:"checkout-content",children:[(0,o.jsxs)("div",{className:"checkout-form",children:[(0,o.jsxs)("div",{className:"checkout-section",children:[(0,o.jsxs)("div",{className:"section-header",children:[(0,o.jsx)(l.JXP,{}),(0,o.jsx)("h3",{children:"Customer Information"})]}),(0,o.jsxs)("div",{className:"form-grid",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"First Name *"}),(0,o.jsx)("input",{type:"text",name:"firstName",value:v.firstName,onChange:k,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Last Name *"}),(0,o.jsx)("input",{type:"text",name:"lastName",value:v.lastName,onChange:k,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Email *"}),(0,o.jsx)("input",{type:"email",name:"email",value:v.email,onChange:k,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Phone *"}),(0,o.jsx)("input",{type:"tel",name:"phone",value:v.phone,onChange:k,required:!0})]})]})]}),(0,o.jsxs)("div",{className:"checkout-section",children:[(0,o.jsxs)("div",{className:"section-header",children:[(0,o.jsx)(l.HzC,{}),(0,o.jsx)("h3",{children:"Shipping Address"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Address *"}),(0,o.jsx)("input",{type:"text",name:"address",value:N.address,onChange:P,placeholder:"Street address, apartment, etc.",required:!0})]}),(0,o.jsxs)("div",{className:"form-grid",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"City *"}),(0,o.jsx)("input",{type:"text",name:"city",value:N.city,onChange:P,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"State *"}),(0,o.jsx)("input",{type:"text",name:"state",value:N.state,onChange:P,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"ZIP Code *"}),(0,o.jsx)("input",{type:"text",name:"zipCode",value:N.zipCode,onChange:P,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Country"}),(0,o.jsxs)("select",{name:"country",value:N.country,onChange:P,children:[(0,o.jsx)("option",{value:"India",children:"India"}),(0,o.jsx)("option",{value:"USA",children:"USA"}),(0,o.jsx)("option",{value:"UK",children:"UK"})]})]})]})]}),(0,o.jsxs)("div",{className:"checkout-section",children:[(0,o.jsxs)("div",{className:"section-header",children:[(0,o.jsx)(l.lZI,{}),(0,o.jsx)("h3",{children:"Payment Method"})]}),(0,o.jsxs)("div",{className:"payment-methods",children:[(0,o.jsxs)("label",{className:"payment-option",children:[(0,o.jsx)("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===b,onChange:e=>S(e.target.value)}),(0,o.jsx)("span",{children:"Credit/Debit Card"})]}),(0,o.jsxs)("label",{className:"payment-option",children:[(0,o.jsx)("input",{type:"radio",name:"paymentMethod",value:"test",checked:"test"===b,onChange:e=>S(e.target.value)}),(0,o.jsx)("span",{children:"Test Payment (Free)"})]})]}),"card"===b&&(0,o.jsxs)("div",{className:"card-form",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Card Number *"}),(0,o.jsx)("input",{type:"text",name:"number",value:A.number,onChange:I,placeholder:"1234 5678 9012 3456",required:!0})]}),(0,o.jsxs)("div",{className:"form-grid",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Expiry Date *"}),(0,o.jsx)("input",{type:"text",name:"expiry",value:A.expiry,onChange:I,placeholder:"MM/YY",required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"CVV *"}),(0,o.jsx)("input",{type:"text",name:"cvv",value:A.cvv,onChange:I,placeholder:"123",required:!0})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Cardholder Name *"}),(0,o.jsx)("input",{type:"text",name:"name",value:A.name,onChange:I,placeholder:"John Doe",required:!0})]})]}),"test"===b&&(0,o.jsxs)("div",{className:"test-payment-notice",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Test Payment Mode:"})," This is a demo payment gateway. No real payment will be processed."]}),(0,o.jsx)("p",{children:'Click "Place Order" to complete your test purchase.'})]})]})]}),(0,o.jsxs)("div",{className:"order-summary",children:[(0,o.jsx)("div",{className:"summary-header",children:(0,o.jsx)("h3",{children:"Order Summary"})}),(0,o.jsx)("div",{className:"summary-items",children:a.map(e=>(0,o.jsxs)("div",{className:"summary-item",children:[(0,o.jsxs)("div",{className:"item-info",children:[(0,o.jsx)("span",{className:"item-name",children:e.product.name}),(0,o.jsxs)("span",{className:"item-quantity",children:["Qty: ",e.quantity]})]}),(0,o.jsxs)("span",{className:"item-price",children:["\u20b9",(e.price*e.quantity).toLocaleString("en-IN")]})]},e.id))}),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",{className:"summary-totals",children:[(0,o.jsxs)("div",{className:"summary-row",children:[(0,o.jsx)("span",{children:"Subtotal"}),(0,o.jsxs)("span",{children:["\u20b9",m().toLocaleString("en-IN")]})]}),(0,o.jsxs)("div",{className:"summary-row",children:[(0,o.jsx)("span",{children:"Tax"}),(0,o.jsxs)("span",{children:["\u20b9",h().toLocaleString("en-IN")]})]}),(0,o.jsxs)("div",{className:"summary-row",children:[(0,o.jsx)("span",{children:"Shipping"}),(0,o.jsx)("span",{children:"Free"})]}),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",{className:"summary-row total-row",children:[(0,o.jsx)("span",{children:"Total"}),(0,o.jsxs)("span",{children:["\u20b9",p().toLocaleString("en-IN")]})]})]}),(0,o.jsx)("button",{className:"btn btn-primary place-order-btn",onClick:async()=>{if(v.firstName&&v.lastName&&v.email&&v.phone)if(N.address&&N.city&&N.state&&N.zipCode)if("card"!==b||A.number&&A.expiry&&A.cvv&&A.name){j(!0);try{const s={customerInfo:v,shippingAddress:N,billingAddress:f.sameAsShipping?N:f,paymentMethod:b,items:a.map(e=>({product:e.product._id,quantity:e.quantity,price:e.price,variant:e.variant})),subtotal:m(),tax:h(),total:p()},r=await fetch("http://localhost:5000/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),i=await r.json();i.success?(u(),d.oR.success("Order placed successfully!"),e("/orders/".concat(i.data.order._id),{state:{order:i.data.order}})):d.oR.error(i.message||"Failed to place order")}catch(s){console.error("Order placement error:",s),d.oR.error("Failed to place order. Please try again.")}finally{j(!1)}}else d.oR.error("Please fill in all payment information");else d.oR.error("Please fill in all shipping address information");else d.oR.error("Please fill in all customer information")},disabled:x,children:x?"Processing...":"Place Order - \u20b9".concat(p().toLocaleString("en-IN"))})]})]})]})})}}}]);
//# sourceMappingURL=730.a760cd43.chunk.js.map