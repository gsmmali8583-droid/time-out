{"ast":null,"code":"import _objectSpread from\"C:/Users/gmudamali/Downloads/EcommerceApplication/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer,useEffect}from'react';import{toast}from'react-hot-toast';import{useAuth}from'./AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";const WishlistContext=/*#__PURE__*/createContext();const wishlistReducer=(state,action)=>{switch(action.type){case'LOAD_WISHLIST':return _objectSpread(_objectSpread({},state),{},{items:action.payload.items||[],loading:false});case'ADD_ITEM':return _objectSpread(_objectSpread({},state),{},{items:[...state.items,action.payload]});case'REMOVE_ITEM':return _objectSpread(_objectSpread({},state),{},{items:state.items.filter(item=>item.product._id!==action.payload.productId)});case'CLEAR_WISHLIST':return _objectSpread(_objectSpread({},state),{},{items:[]});case'SET_LOADING':return _objectSpread(_objectSpread({},state),{},{loading:action.payload});default:return state;}};const initialState={items:[],loading:true};export const WishlistProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(wishlistReducer,initialState);const{isAuthenticated}=useAuth();useEffect(()=>{const savedWishlist=localStorage.getItem('wishlist');if(savedWishlist){try{const wishlistData=JSON.parse(savedWishlist);dispatch({type:'LOAD_WISHLIST',payload:wishlistData});}catch(error){console.error('Error loading wishlist:',error);dispatch({type:'SET_LOADING',payload:false});}}else{dispatch({type:'SET_LOADING',payload:false});}},[]);useEffect(()=>{if(!state.loading){localStorage.setItem('wishlist',JSON.stringify({items:state.items}));}},[state.items,state.loading]);const addToWishlist=product=>{const existingItem=state.items.find(item=>item.product._id===product._id);if(existingItem){toast.error('Item already in wishlist');return false;}dispatch({type:'ADD_ITEM',payload:{id:product._id,product,addedAt:new Date().toISOString()}});toast.success('Added to wishlist');return true;};const removeFromWishlist=productId=>{dispatch({type:'REMOVE_ITEM',payload:{productId}});toast.success('Removed from wishlist');};const clearWishlist=()=>{dispatch({type:'CLEAR_WISHLIST'});toast.success('Wishlist cleared');};const isInWishlist=productId=>{return state.items.some(item=>item.product._id===productId);};const getItemsCount=()=>{return state.items.length;};const value=_objectSpread(_objectSpread({},state),{},{addToWishlist,removeFromWishlist,clearWishlist,isInWishlist,getItemsCount});return/*#__PURE__*/_jsx(WishlistContext.Provider,{value:value,children:children});};export const useWishlist=()=>{const context=useContext(WishlistContext);if(!context){throw new Error('useWishlist must be used within a WishlistProvider');}return context;};export default WishlistContext;","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","toast","useAuth","jsx","_jsx","WishlistContext","wishlistReducer","state","action","type","_objectSpread","items","payload","loading","filter","item","product","_id","productId","initialState","WishlistProvider","_ref","children","dispatch","isAuthenticated","savedWishlist","localStorage","getItem","wishlistData","JSON","parse","error","console","setItem","stringify","addToWishlist","existingItem","find","id","addedAt","Date","toISOString","success","removeFromWishlist","clearWishlist","isInWishlist","some","getItemsCount","length","value","Provider","useWishlist","context","Error"],"sources":["C:/Users/gmudamali/Downloads/EcommerceApplication/client/src/context/WishlistContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { toast } from 'react-hot-toast';\nimport { useAuth } from './AuthContext';\n\nconst WishlistContext = createContext();\n\nconst wishlistReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOAD_WISHLIST':\n      return {\n        ...state,\n        items: action.payload.items || [],\n        loading: false\n      };\n    case 'ADD_ITEM':\n      return {\n        ...state,\n        items: [...state.items, action.payload]\n      };\n    case 'REMOVE_ITEM':\n      return {\n        ...state,\n        items: state.items.filter(item => item.product._id !== action.payload.productId)\n      };\n    case 'CLEAR_WISHLIST':\n      return {\n        ...state,\n        items: []\n      };\n    case 'SET_LOADING':\n      return {\n        ...state,\n        loading: action.payload\n      };\n    default:\n      return state;\n  }\n};\n\nconst initialState = {\n  items: [],\n  loading: true\n};\n\nexport const WishlistProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(wishlistReducer, initialState);\n  const { isAuthenticated } = useAuth();\n\n  useEffect(() => {\n    const savedWishlist = localStorage.getItem('wishlist');\n    if (savedWishlist) {\n      try {\n        const wishlistData = JSON.parse(savedWishlist);\n        dispatch({ type: 'LOAD_WISHLIST', payload: wishlistData });\n      } catch (error) {\n        console.error('Error loading wishlist:', error);\n        dispatch({ type: 'SET_LOADING', payload: false });\n      }\n    } else {\n      dispatch({ type: 'SET_LOADING', payload: false });\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!state.loading) {\n      localStorage.setItem('wishlist', JSON.stringify({ items: state.items }));\n    }\n  }, [state.items, state.loading]);\n\n  const addToWishlist = (product) => {\n    const existingItem = state.items.find(item => item.product._id === product._id);\n    if (existingItem) {\n      toast.error('Item already in wishlist');\n      return false;\n    }\n\n    dispatch({\n      type: 'ADD_ITEM',\n      payload: {\n        id: product._id,\n        product,\n        addedAt: new Date().toISOString()\n      }\n    });\n\n    toast.success('Added to wishlist');\n    return true;\n  };\n\n  const removeFromWishlist = (productId) => {\n    dispatch({\n      type: 'REMOVE_ITEM',\n      payload: { productId }\n    });\n    toast.success('Removed from wishlist');\n  };\n\n  const clearWishlist = () => {\n    dispatch({ type: 'CLEAR_WISHLIST' });\n    toast.success('Wishlist cleared');\n  };\n\n  const isInWishlist = (productId) => {\n    return state.items.some(item => item.product._id === productId);\n  };\n\n  const getItemsCount = () => {\n    return state.items.length;\n  };\n\n  const value = {\n    ...state,\n    addToWishlist,\n    removeFromWishlist,\n    clearWishlist,\n    isInWishlist,\n    getItemsCount\n  };\n\n  return (\n    <WishlistContext.Provider value={value}>\n      {children}\n    </WishlistContext.Provider>\n  );\n};\n\nexport const useWishlist = () => {\n  const context = useContext(WishlistContext);\n  if (!context) {\n    throw new Error('useWishlist must be used within a WishlistProvider');\n  }\n  return context;\n};\n\nexport default WishlistContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}